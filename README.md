# AuCityAnalytics
# Visit our webpage http://130.56.255.16/

As messages explode the internet and the social media, information data has became a huge wealth to show human’s behaviors and their daily life. People is more likely to share their life and thoughts via the social network like Twitter for the recent decade. The data from the social network can exposure social phenomenons and cultural backgrounds which is valuable for the analysis. Comparing different attributes with data from social network on some specific topic can create many meaningful results. After collecting data from the Twitter around main city of Australia, some interesting analyzes can be raised after processing them.   

The scenarios will focus on people’s daily life and their ideas from six main Australian cities: Adelaide, Brisbane, Canberra, Melbourne, Perth and Sydney.
The project will taking Twitter API to collect data from Twitter around these cities, and using couchDB database to store and processing the data. To achieve an efficient performance when processing huge volume of data, the NeCTAR Research Cloud will support the whole project as providing flexible and powerful infrastructures. The project will also involves other tools that will discuss later.  

To give the functionalities of the system, we design the application in this project in the following architecture. In general, the system has four levels, which cooperate with each other and maintain the health and running of the system. The core of the system is the server level, which is the bridge between the data level and application level. In addition, a IT automation tool Ansible was used to help deploy the whole system.

# User Guide
1. Deploy the whole environment for the system.


      1)  The Ansible is used to deploy the instances. First of all, run the command below to install Ansible in your computer:
            $sudo pip install ansible
      2)  Change the hosts file to include the group of instances’ IPs:
            In our folder ‘playbook’, there is a file ‘hosts’, open it and add a group of IPs of your instances.
      3)  Open the ‘playbook/roles/deployment/tasks/main.yml’ file and find the code chunk below:
          Change the nodeIP field to the IPs of your nodes.
      4)  Run the command below to deploy the environment in the instances, replace the ‘path/to/’ to the real path of the folder ‘playbook’, the ‘cloud.key’ file is generated by us, you can also generate your own. And also remember that the ‘groupname’ needs to be replaced to your group name written in the hosts file:
           $ansible-playbook -i path/to/playbook/hosts --key-file=path/to/playbook/cloud.key -u ubuntu path/to/playbook/deployment.yml -e myVM=groupname -K

      The deployment.yml will mount the volume to the /couchdb folder in the instances first, and then, it will install, configure and start couchDB in each instance, next, it will add the nodes you expected (which you wrote in the ‘nodeIP’ field) to the cluster. Later, the many packages, such as tweepy, Scikit-learn, NLTK, Node.js and so on, are installed in the instances.

2. Run the tweets harvesting program
Run the command below to do the tweets harvesting. Users have two choices for the harvesting, that is, using Streaming API or using Rest API. You can choose different API by setting the mode. Users need to replace the ‘yourmode’ in the command to ‘streaming’ or ‘rest’. Besides, the ‘groupname’, ‘yourcity’, ‘owner’ and ‘yourArg’ also needs to be changed. The choices of ‘yourcity’ are ‘adelaide’, ‘brisbane’, ‘canberra’, ‘melbourne’, ‘perth’ and ‘sydney’. The ‘owner’ defines which tweeter API key is used during the harvesting. We saved our API keys in the keys.py file. ‘yourArg’ should be ‘-o’ or ‘-n’. ‘-n’ indicates the program will build a new database, ‘-o’ works on the old database.
           $ansible-playbook -i path/to/playbook/hosts --key-file=path/to/playbook/cloud.key -u ubuntu path/to/playbook/harvest.yml -e myVM=groupname -e mode=yourmode -e city=yourcity -e keyOwner=owner -e arg=yourArg -K

3. Run the sentiment analysis and add emotion labels to the tweets.
$ansible-playbook -i path/to/playbook/hosts --key-file=path/to/playbook/cloud.key -u ubuntu path/to/playbook/analysis.yml -e myVM=groupname -e city=yourcity -K


4. Run the web server on instance.
$start hello.js
5. Access to web application
$ssh -i keyforinstance.key -L 127.0.0.1:3000:127.0.0.1:3000 ubuntu@130.56.255.16 Input http://127.0.0.1:3000 in address bar to access.
